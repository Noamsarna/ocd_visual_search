---
title             : "Obsessive Compulsive visual search: a reexamination of presence-absence asymmetries"
shorttitle        : "Obsessive Compulsive visual search: a reexamination of presence-absence asymmetries"

author: 
  - name          : "Noam Sarna"
    affiliation   : "1"
    corresponding : yes    # Define only one corresponding author
    address       : "Tel Aviv, Israel 69978"
    email         : "noamsarna@mail.tau.ac.il"

  - name          : "Ruvi Dar"
    affiliation   : "1"

  - name          : "Matan Mazor"
    affiliation   : "2"


affiliation:
  - id            : "1"
    institution   : "School of Psychological Sciences, Tel Aviv University"
  - id            : "2"
    institution   : "Department of Psychological Sciences, Birkbeck, University of London, UK"

abstract: |
  In previous research, obsessive-compulsive (OC) tendencies were associated with longer search times in a visual search setting. These findings, which were replicated and extended to a clinical sample, were specific to target-absent trials, with no effect on search times when a target was present in the display. Initially, this selectivity was interpreted as indicative of checking behavior in response to mild uncertainty. However, an alternative interpretation is that individuals with high OC tendencies (OC+) suffer from a more specific difficulty with inferences about absence. In two large-scale pre-registered online experiments (conceptual replication N = 1004, direct replication N = 226), we sought to replicate the original finding and shed further light on its underlying cause: an increased sensitivity to mild uncertainty, or a selective deficiency in inference about absence.  In both experiments, we find no evidence of prolonged search times in target-absent trials for OC+ individuals. Taken together, our findings provide no support for the previously observed higher search times of OC+ participants in target-absent trials. We discuss potential differences relative to previous findings and implications for cognitive and metacognitive theories of OCD. 

  
bibliography      : "r-references_full_paper.bib"

floatsintext      : no
linenumbers       : yes
draft             : no
mask              : no

figurelist        : no
tablelist         : no
footnotelist      : no

classoption       : "man"
output            : papaja::apa6_word
---

```{r setup, include = FALSE, warning=FALSE}

library(tidyverse)
library(broom)
library(nlme)
library(lme4)
library(lmerTest)
library(ggpubr)
library(cowplot)
library(caret)
library(papaja)
library(lvmisc)
library(wesanderson)
library(patchwork)
library(reshape2)
```

```{r analysis-preferences}
# Seed for random number generation
set.seed(42)
knitr::opts_chunk$set(cache.extra = knitr::rand_seed)
```

<!-- # Introduction  -->

Theories on obsessive-compulsive disorder (OCD) emphasize the pivotal role of pathological doubt in the disorder's phenomenology [@rasmussenClinicalFeaturesPhenomenology1989; @reedObsessionalExperienceCompulsive1985a; @shapiroNeuroticStyles1965]. This persistent doubt, marked by increased uncertainty, gives rise to repetitive checking rituals that, paradoxically, serve to intensify the doubt itself. In laboratory perceptual studies, checking behavior is commonly manifested in slow reaction times, as OC participants require more evidence under high uncertainty [@bancaEvidenceAccumulationObsessiveCompulsive2015; @hauserMetacognitiveImpairmentsExtend2017d. Previous studies found that participants with high obsessive compulsive tendencies (OC+) take longer to decide that a target is absent from a visual search array compared to those with low obsessive compulsive tendencies (OC-; @toffoloMildUncertaintyPromotes2013). These finding have been replicated [@toffoloUncertaintyCheckingIntolerance2014] and extended to a clinical sample, where they were found to be specific to patients with OCD and absent in those suffering from anxiety [@toffoloPatientsObsessiveCompulsiveDisorder2016]. In these experiments, checking behavior was operationalized by search time, and high and low uncertainty were operationalized by means of contrasting target-present and target-absent trials. Therefore, relatively longer search times for the OC+ group in target-absent trials were interpreted as perseverative checking behavior under mild uncertainty.

```{r load_data, echo=FALSE, cache=TRUE}

#load anon jatos data 
df<- read_csv('../data/anon_jatos_results_p1.csv')
df2<- read_csv('../data/anon_jatos_results_p2.csv')

df <- rbind(df, df2)
rm(df2)

#load anon prolific data 
demo_prolific <- read.csv('../data/anon_demo_prolific.csv')


# create OCI data ---------------------------------------------------------

#parse oci data from df 
OCI_df <- df %>%
  filter(grepl('oci', Identifier)) %>% 
  select(subj_id, question, answer_oci) %>% 
  mutate(attention_check = question %in% c("OCI-Attention_check_1","OCI-Attention_check_2")) %>%
  arrange(subj_id, question)%>%
  #arrange it in a long format df 
  group_by(subj_id) %>%
  summarise(oci_overall=sum(as.numeric(answer_oci[!attention_check])), #compute oci general score 
            failed_attention_OCI = answer_oci[question=='OCI-Attention_check_1']!=0 | #attention check failure
            answer_oci[question=='OCI-Attention_check_2']!=2,
            OCI_Absent = answer_oci[question=='OCI-Absent']) %>%
  mutate(
  #split to quartiles based on oci score
    OCI_quantile = as.numeric(cut(oci_overall,
                                  breaks = quantile(oci_overall[!failed_attention_OCI],
                                                    probs = seq(0, 1, 0.25),
                                                    na.rm = T,
                                                    type = 9),
                                  right = F, 
                                  include.lowest = T,
                                  include.highest = T))
  )

# create DASS data ---------------------------------------------------------

#create vectors for DASS subscales. 
DASS_anxiety <- c("DASS-4","DASS-7", "DASS-9", "DASS-15", "DASS-19", "DASS-20")
DASS_depression <- c("DASS-3","DASS-5", "DASS-10", "DASS-13", "DASS-16", "DASS-17","DASS-21")

#parse DASS data from df
DASS_df <- df %>%
  filter(grepl('DASS', Identifier)) %>% 
  select(subj_id, question, answer_dass) %>% 
  arrange(subj_id, question) %>%
  #arrange in a new df 
  group_by(subj_id)%>%
  summarise(DASS_anxiety = sum(as.numeric(answer_dass[question %in% DASS_anxiety])),
            DASS_depression = sum(as.numeric(answer_dass[question %in% DASS_depression])))

# unite dass and oci
questionnaires_df <- left_join(OCI_df, DASS_df,by = "subj_id")


# df of explicit difficulty rating---------------------------------------------------

#get data from df 
difficulty_rating <- df %>% 
  filter(trial_type == "html-slider-response") %>% 
  select(subj_id,test_part,response) %>%
  #retrieve variable names. 
  mutate(difficulty_rating = case_when(str_detect(test_part,"PresentOinC25") ~ "OinC_25_TP",
                                       str_detect(test_part,"Absent09") ~ "CinO_9_TA",
                                       str_detect(test_part,"PresentOinC09") ~ "OinC_9_TP",
                                       str_detect(test_part,"Absent25") ~ "CinO_25_TA")) %>% 
  select(-test_part) %>% 
  
  #adding OCI quantile to difficulty df 
  left_join(questionnaires_df %>% 
              group_by(subj_id) %>%
              summarise(OCI_quantile=first(OCI_quantile)) %>% 
              select(subj_id, OCI_quantile), 
            difficulty_rating,
            by = "subj_id")

# visual search df -------------------------------------------------------------

search_df <- df %>% 
  filter(trial_type == "p5vs_yn_small_grid") %>%
  select(trial_type,trial_index,subj_id,sequence,target_position,
          subj_id,set_size,target_present,
         RT,test_part,correct,search_type) %>% 
# unite search and questionnaire dfs together 
  left_join(questionnaires_df,
                       by = "subj_id") %>% 
  #unite search df with demo prolific 
  left_join(.,demo_prolific,
            by = "subj_id")

#recode variables 
search_df$target_present<-search_df$target_present=='TRUE'
search_df$RT <- as.numeric(search_df$RT)
search_df$correct <- as.numeric(as.logical(search_df$correct))
search_df$set_size <- as.factor(search_df$set_size)
 

# Rejecting participants with more than 15% error trials -----------------------

rejection_df <- search_df %>% 
  group_by(subj_id) %>% 
  summarise(accuracy = mean(correct)) %>% 
  mutate(reject = accuracy<0.85)

rejected_num <- sum(rejection_df$reject=='TRUE')


# flag bad trails
search_df <- search_df %>% rowwise() %>% 
  mutate(under_100 = as.numeric(RT <= 100)) 


#filter out participants for accuracy and attention check 
search_df <- left_join(search_df, 
                       rejection_df %>% select(subj_id, reject), 'subj_id') %>%
  # filter(reject=='FALSE' | failed_attention_OCI == 1)
  filter(reject=='FALSE' & failed_attention_OCI == 0) %>%
  filter(under_100 == 0) #filter our trials 

#total n after participants removal 
df.N_total <- search_df$subj_id %>% unique() %>% length()

#total n in each quartile 
#search_df %>% select(subj_id, OCI_quantile) %>% unique() %>% select(OCI_quantile) %>% table()


```

# Methods

We report how we determined our sample size, all data exclusions (if any), all manipulations, and all measures in the study. <!-- 21-word solution (Simmons, Nelson & Simonsohn, 2012; retrieved from http://ssrn.com/abstract=2160588) -->

## Participants

The research complied with all relevant ethical regulations and was approved by the Research Ethics Committee of Tel-Aviv University (study ID number 0004169-1). Participants will be recruited via Prolific and selected based on their acceptance rate (\>95%) and for being native English speakers, located in the UK, and not having participated in former study pilots. We encountered graphical problems with Safari browser during the pilot study, so we will ask participants to use only other browsers. The entire experiment will take 14 minutes to complete (the median completion time in a pilot study). Participants will be paid £2 for their participation, equivalent to an hourly wage of £8.57.

## Material

Visual search task The experiment described in this study was adapted from [@mazor2022efficient], with stimuli created to replicate the ones used in the [@toffolo2013mild] experiment. All elements (distractors and target) and their placement on the search grid were made to replicate as closely as possible the paradigm used in @toffolo2013mild. The visual search task will consist of 4 blocks, each containing 24 trials of searching for either a closed or an open square. To make sure participants understand the task, a practice phase will be given first. The practice phase will consist of one block with six trials of visual search. Elements in both practice and main part will be white on dark grey background. Each trial will last for a maximum of 10 seconds or until a response is received. If no response is given within 10 seconds, the next trial will immediately appear. Feedback about the response (wrong/right) will be given only in the practice phase, to help participants learn the task efficiently. In the main part of the experiment, no feedback will be given, as was the case in the original paradigm [@toffolo2013mild].

## Procedure

Participants will first be instructed about the experiment's structure, which comprises three parts: A visual search part, questions about the visual search part, and some more general questions. Then, they will be informed about the main part of the experiment -- the visual search part. Specifically, their task is to report, as accurately and quickly as possible, whether a target stimulus was present (press 'J') or absent (press 'F'). Then, practice trials will be delivered, in which the target stimulus is a rotated T, and distractors are rotated Ls. The purpose of the practice trials is to familiarize participants with the task structure. For these practice trials, the number of items will always be 4. In the practice trials, participants will be given feedback about the accuracy of their responses. The feedback will appear right after a response is given. If the response is correct, then the word "Correct!" will immediately pop on the screen, for 1 second. If the response is wrong, the word "Wrong!" will immediately pop on the screen for 5 seconds. The extended duration of the word "wrong" is intended to feel aversive and to make sure participants are paying full attention and giving accurate responses (a pilot study showed higher accuracy rates when using this method). Practice trials will be delivered in one block of 6 trials, and the main part of the experiment will start only once participants respond correctly on at least five trials.

We used `r cite_r("r-references.bib")` for all our analyses.

# Results

```{r analyze_data, echo=FALSE, cache=TRUE}

# Perceived difficulty pre-processing -------------------------------------

difficulty_rating_by_condition <- difficulty_rating %>% 
  mutate(condition=case_when(str_detect(difficulty_rating, "_TA") ~ "Absent",
                             str_detect(difficulty_rating, "_TP") ~ "Present")) %>% 
  group_by(difficulty_rating, condition) %>%
  summarise(mean = mean(as.numeric(response), na.rm = T),
            sd = sd(as.numeric(response), na.rm = T)) %>% 
  ungroup() 

#difficulty rating with oc quantile 
difficulty_rating_by_condition_with_oci <- difficulty_rating %>% 
  mutate(condition=case_when(str_detect(difficulty_rating, "_TA") ~ "Absent",
                             str_detect(difficulty_rating, "_TP") ~ "Present")) %>% 
  group_by(difficulty_rating, condition, OCI_quantile) %>%
  summarise(mean = mean(as.numeric(response), na.rm = T),
            sd = sd(as.numeric(response), na.rm = T)) %>% 
  ungroup() %>% 
  filter(OCI_quantile=='1' | OCI_quantile=='4') %>% 
  mutate(OCI_quantile_factor = recode(OCI_quantile, '1'='low', '4'='high'))

# Summary dfs  ------------------------------------------------------------

search_summary_RT <- 
  #every participant gets a median score for each search option (8)
  #we use median because we didn't exclude longer RT
  search_df %>% 
  filter(correct==1) %>% #only correct trials 
  group_by(subj_id, set_size,search_type, target_present, OCI_quantile) %>% 
  summarise(median_RT = median(RT, na.rm = T)) %>%
  ungroup() 

RT_over_participant <-
  search_summary_RT %>% group_by(set_size,search_type, target_present) %>%
  summarise(mean_RT= mean(median_RT, na.rm = T)) %>% 
  ungroup()


RT_over_participant_oci <-
  search_summary_RT %>% group_by(set_size,search_type, target_present, OCI_quantile) %>%
  summarise(mean_RT= mean(median_RT, na.rm = T)) %>% 
  ungroup()

toffolo_data <- search_df %>%
  filter(set_size == 25) %>% 
  filter(search_type == "OinC") %>% 
  arrange(subj_id, target_present)


by_sub_toffolo <- toffolo_data %>% 
  group_by(subj_id, target_present, OCI_quantile, 
           oci_overall,
           DASS_anxiety, DASS_depression, Age) %>% 
  summarise(N = n(),
            mean_RT = mean(RT, na.rm = T),
            median_RT = median(RT, na.rm = T),
            sd_RT = sd(RT, na.rm = T)) %>% ungroup() %>% 
  mutate(log_mRT = log(mean_RT))

# Extracting slopes ------------------------------------------------------------------

#Reordering set size to get the slopes for the effect of going from 9 to 25. 
search_df$set_size <- relevel(as.factor(search_df$set_size), '9')

#extracting slopes 
search_slopes_df <- search_df %>%
  group_by(subj_id,search_type,target_present) %>%
  nest() %>%
  mutate(model = map(data, ~ lm(RT ~ set_size, data =.)),
         tidy = map(model, ~ tidy(.x))) %>%
  unnest(tidy) %>%
  # we are interested in the slope, i.e., the effect of set size.
  filter(term=='set_size25')

search_slopes_df<- left_join(search_slopes_df, questionnaires_df %>% 
                               select(subj_id, OCI_quantile, oci_overall, DASS_depression, DASS_anxiety),
                             by='subj_id') 



slopes_table <-search_slopes_df %>% 
  group_by(OCI_quantile, search_type, target_present) %>% 
  summarise(mean(estimate)) %>%
  filter(OCI_quantile==1 | OCI_quantile==4)


```

```{r h1_h2_t-test, echo=FALSE, cache=TRUE}
#creating a df for second hypothesis testing 

H1.desc <- search_slopes_df %>% group_by(search_type) %>%  
  summarise(mean_slope = mean(estimate),
            ms_item = mean_slope/(25-9))

H2.df<- search_slopes_df %>% 
  filter(target_present==TRUE & search_type=='OinC' |target_present==FALSE & search_type=='CinO')  %>% 
  mutate(group = case_when(search_type == 'OinC' ~ 'hard_present',
                           search_type == 'CinO' ~ 'easy_absent'));
                          
H2.desc <- H2.df %>% 
  group_by(group) %>% 
  summarise(mean_slope=mean(estimate),
            ms_item = mean_slope/(25-9))

```

*Hypotheses 1 and 2 - Task validation*  - To validate our paradigm structure and to assess whether we successfully created an easier search by leveraging search asymmetries (i.e., switching between the target and distractors), we first examined the difference in slopes between the two search types (easy/hard), regardless of target presence (pre-registered hypothesis H1). As anticipated, a one-tailed paired t-test demonstrated a steeper slope for the difficult search `r printnum (H1.desc[2,3])` ms/item compared to the easy search `r printnum (H1.desc[1,3])` ms/item, `r apa_print(t.test(estimate~search_type, data=search_slopes_df, paired=T))$statistic`. Furthermore, a one-tailed paired t-test revealed that target-present slopes in the hard search `r printnum (H2.desc[2,3])` ms/item were steeper than target-absent slopes in the easy search `r printnum (H2.desc[1,3])` ms/item, `r apa_print(t.test(estimate~group, data=H2.df, paired=T))$statistic` (pre-registered hypothesis H2).

The initial two control comparisons served to validate that we successfully designed a target-absent condition that was easier than a target-present condition, thereby experimentally decoupling decision certainty from target presence, and enabling to measure their independent effects on search time as a function of obsessive-compulsive tendencies.

```{r DR_h3, echo=FALSE, cache=TRUE}
  
  # Toffolo replication plots -----------------------------------------------------


exp1_mean_RT_fig <- by_sub_toffolo%>% 
    filter(OCI_quantile == 1 | OCI_quantile == 4) %>% 
    mutate(oci_type = ifelse(.$OCI_quantile == 1, "Low OC (OC-)", "High OC (OC+)")) %>% 
    select(subj_id, target_present, oci_type, mean_RT)  %>%
    ggplot(aes(x = target_present, y = mean_RT,  group = oci_type, shape = oci_type)) +
    stat_summary(fun = mean,
                 geom = "point",
                 position = position_dodge(0.9),
                 size = 5) +
    stat_summary(fun.data = mean_se,
                 geom = "errorbar",
                 width = 0.4,
                 position = position_dodge(0.9)) +
    # stat_summary(fun = mean,
    #              geom = "line",
    #              position = position_dodge(0.9)) +
    scale_shape_manual(values = c("High OC (OC+)" = 1, "Low OC (OC-)" = 2)) +
    scale_x_discrete(labels = c("FALSE" = "Absent", "TRUE" = "Present")) +
    theme_bw() +
    theme(axis.title.x = element_blank(),
          text = element_text(size = 12)) +
    ylab('Mean RT (ms)')+
    labs(shape = "OC group")+ 
    coord_cartesian(ylim = c(2500,7500))
  
  
#ggsave(filename = "exp_1_results.png",width = 4, height = 3, dpi = 1500)  


H3.df <- toffolo_data %>% 
  filter(OCI_quantile==1| OCI_quantile==4) %>%
  group_by(subj_id, OCI_quantile, target_present) %>%
  summarise(mean_RT=mean(RT)) %>% 
  ungroup()

```

*Hypothesis 3 - Replication of Toffolo et al. (2013), mean RT* To directly replicate the findings of Toffolo et al. (2013, 2014, 2016), we focused on the difficult search with the larger set size (set size = 25). We conducted a mixed-effects ANOVA, with mean response time (RT) as the dependent variable, group (OC+ vs. OC-) as a between-subjects variable, and target presence (present vs. absent) as a within-subjects variable. Specifically, we tested for an interaction between group and target presence, wherein the mean RT difference between the OC+ and OC- groups would be significantly larger in target-absent trials. Contrary to our expectations, the analysis did not reveal a significant interaction between group and target presence, `r apa_print(afex::aov_ez("subj_id", "mean_RT", H3.df, between = "OCI_quantile", within = "target_present"))$statistic$OCI_quantile_target_present`, suggesting no difference in mean RT between the OC+ and OC- groups in either target-present or target-absent trials (figure 3).

```{r h4_anova, echo=FALSE, cache=TRUE}

H4.df<- search_slopes_df %>% 
  filter(OCI_quantile==1 | OCI_quantile==4) %>% 
  filter(search_type=='OinC')
                          
H4.desc <- H4.df %>% group_by(OCI_quantile, target_present) %>% summarise(mean_slope = mean(estimate))

```

*Hypothesis 4: Extension of Toffolo et al. (2013), search slopes* Following the previous hypothesis, we conducted the same mixed-effects ANOVA, with group (OC+/OC-) as between-subject variable and target presence (present/absent) as within-subject variables, only this time, we focused on the search slopes (reaction time as a function of set size) as a dependent variable. Consistent with our findings for Hypothesis 3, a mixed-effects ANOVA revealed no statistically significant interaction between group and target presence `r apa_print(afex::aov_ez("subj_id", "estimate", data=H4.df, between = "OCI_quantile", within = "target_present"))$statistic$OCI_quantile_target_present`, again providing no evidence for a selective slowing of OC+ individuals in target-absent trials.

```{r h5_anova, echo=FALSE, cache=TRUE}
H5.df <- search_slopes_df %>% filter(OCI_quantile==1| OCI_quantile==4) %>% filter(search_type=='CinO')

```

*Hypothesis 5: Low-uncertainty inference about absence*\
Originally, our primary focus was on this hypothesis, examining the effect of obsessive-compulsive tendencies on target-absent search times in an easy, low-uncertainty, search setting. However, given our failure to replicate a group difference in the hard search (Hypotheses 3 and 4), a significant result here seemed unlikely. Indeed, a mixed-effects ANOVA with group as a between-subjects variable and target presence as a within-subjects variable did not reveal a significant interaction between group and target presence in the easy search, `r apa_print(afex::aov_ez("subj_id", "estimate", H5.df, between = "OCI_quantile", within = "target_present"))$statistic$OCI_quantile_target_present`.

```{r model_comparison, echo=FALSE, cache=TRUE}

#We didn't use LOOCV since we included random terms in our model. So instead we comapred models by their AIC and BIC values.  

m1 <- 
  search_slopes_df%>% 
  filter(OCI_quantile==1|OCI_quantile==4) %>% 
  mutate(OCI_group = recode(OCI_quantile, '1'='low', '4'='high')) %>% 
  
  lmer(estimate ~ 1+OCI_group+ search_type * target_present +search_type *OCI_group+
         (search_type+target_present|subj_id), #random slope for search type and target present for each participant 
        data =.)

#examine model parameters 
#parameters::model_parameters(m1)



m2 <- 
  search_slopes_df%>% 
  filter(OCI_quantile==1|OCI_quantile==4) %>% 
  mutate(OCI_group = recode(OCI_quantile, '1'='low', '4'='high')) %>% 
  
  lmer(estimate ~ 1+OCI_group+ search_type * target_present +target_present *OCI_group+
         (search_type+target_present|subj_id), #random slope for search type and target present for each participant 
        data = .)

#examine model parameters 
#parameters::model_parameters(m2)


H6.model_acc_table <-as.data.frame(compare_accuracy(m1, m2))  %>% 
  select(Model, AIC, BIC)

H6.model_acc_table

#I had problem creating this table in APA format and also including the formula within the table.. Would appreciate some help with that.  

```

*Hypothesis 6: Model comparison* Our experimental design aimed to differentiate between difficulties arising from higher uncertainty and those arising from the absence of the target. To achieve this, we used two search types: a hard search (searching for a closed square among open squares), and an easy search (searching for an open square among closed squares). Additionally, we manipulated the presence or absence of the target. To determine whether uncertainty or absence had a greater impact on OC+ search time, we constructed two competing regression models that differed only in their interaction terms (table 1). Beyond the search type and the target presence predictors, the first model (M1) included the interaction between group and search type (easy/hard; slope_estimate\~ 1+group+search_type \* target_presence+ search_type \* group), while the second model (M2) included the interaction between group and target presence (absent/present; slope_estimate\~ 1+group+ search_type \* target_present+target_present \* group). Since the two models differ only in their last interaction effect, their complexity (that is, the number of fitted coefficients) is the same, which allowed us to compare these models directly. We compare model performance using their AIC and BIC values. The model comparison table shows that both models have the same AIC and BIC values suggesting that the interaction between group and target presence does not explain search time to a greater extent than the interaction between group and search type.

In summary, the results pertaining to hypotheses 3 through 6 indicate no substantiated evidence of prolonged search time among OC+ participants during target-absent trials. Similarly, no discernible group variances emerged, regardless of whether we used the complete OCI scale (preregistered hypothesis 9) or accounted for anxiety and depression (preregistered hypothesis 10). There were also no significant differences between groups during the task's initial trials, prior to the accumulation of any experience (preregistered hypothesis 8). Lastly, we observed no significant differences between the groups in their self-reported measures of task difficulty (preregistered exploratory analysis). Detailed calculations and results for all these hypotheses are provided in the Appendix for further reference.

In Experiment 1, target-absent search times were not significantly slower in OC+ compared to OC- individuals. While this stands in contrast to previous reports [@toffolo2013mild,@toffolo2014uncertainty, @toffolo2016patients], our experiment differed from the original study in several respects. Most notably, search times in this study (~4.5s for target-absent and ~2.6s for target-present) were shorter compared to those in @toffolo2013mild (~5.5 for target-absent and ~3.5s for target-present). Accordingly, we considered the possibility that the task used in experiment 1 may have been less challenging and potentially insufficient to elicit doubt and trigger repetitive checking behavior. In order to directly investigate this hypothesis, experiment 2 employed the original stimuli from @toffolo2013mild within an online sample to ascertain whether the failure to reproduce the effect resulted from an excessively easy task.



```{r Exp2_load_data, echo=FALSE, cache=TRUE}

# Pre processing  ---------------------------------------------------------

#load df from jatos 
exp2.jatos_df <-read_csv("../data/Exp_2_anon_jatos_results_10July2023.csv")


failed_practice <- exp2.jatos_df %>% 
  filter(trial_index != "trial_index") %>%
  group_by(subj_id) %>% 
  summarise(max_trail = max(as.double(trial_index, na.rm = T)),
            failed_practice = max_trail <= 42) %>% 
  select(subj_id, max_trail,failed_practice)  

exp2.jatos_df <- left_join(exp2.jatos_df, failed_practice)

n_failed_practice <- failed_practice %>% pull(failed_practice) %>% sum()

total_valid_n <- exp2.jatos_df %>%
  filter(failed_practice=='FALSE') %>%
  pull(subj_id) %>%  n_distinct()


#load prolific df 
exp2.demo_prolific<-read.csv("../data/Ex2_anon_demo_prolific.csv")
exp2.demo_prolific$subj_id <- as.factor(exp2.demo_prolific$subj_id)

#merge df
exp2.jatos_df$subj_id <- as.factor(exp2.jatos_df$subj_id)
exp2.jatos_df <- left_join(exp2.jatos_df, exp2.demo_prolific, by='subj_id')


#parse oci data from df 
exp2.OCI_df <- exp2.jatos_df %>%
  filter(failed_practice=='FALSE') %>% 
  filter(grepl('oci', Identifier)) %>% 
  select(subj_id, question, answer_oci) %>% 
  mutate(attention_check = question %in% c("OCI-Attention_check_1","OCI-Attention_check_2")) %>%
  arrange(subj_id, question)%>%
  #arrange it in a long format df 
  group_by(subj_id) %>%
  summarise(oci_overall=sum(as.numeric(answer_oci[!attention_check])), #compute oci general score 
            failed_attention_OCI = answer_oci[question=='OCI-Attention_check_1']!=0 | #attention check failure
              answer_oci[question=='OCI-Attention_check_2']!=2,
            OCI_Absent = answer_oci[question=='OCI-Absent']) %>%
  mutate(
    #split to quartiles based on toffolo 2013 scores 
    OCI_quantile = case_when(oci_overall>=17 ~ "high", 
                             oci_overall<=5 ~ "low",
                             TRUE ~ 'else'))

#count how many participants in each group 
exp2.OCI_df %>% group_by(OCI_quantile) %>% count()


# merge data with oci 
exp2.jatos_df <- left_join(exp2.jatos_df, 
                      exp2.OCI_df %>% select(subj_id, oci_overall, OCI_quantile, OCI_Absent),
                      by='subj_id')

############ create a df for the checking task 

exp2.checking_task <- exp2.jatos_df %>% 
  filter(trial_type == "image-keyboard-response") %>%
  filter(isPractice=='FALSE') %>% 
  select(trial_type,trial_index,subj_id,condition,
         rt,correct, isPractice, OCI_quantile, oci_overall, OCI_Absent)

#create a table making sure every participant have 50 trials, 25 absent and 25 present 
checking_table <-exp2.checking_task %>% group_by(subj_id) %>% 
  count(condition)

#recode variable
exp2.checking_task$rt <-as.numeric(exp2.checking_task$rt)

# accuracy df  -----------------------------------------------------------
exp2.checking_task$correct <- exp2.checking_task$correct=='TRUE' #change to Boolean 

exp2.checking_task <- exp2.checking_task %>% group_by(subj_id) %>% 
  mutate(mean_acc = mean(correct)) #calculate mean accuracy per subject 

#create accuracy df with acc score and OCI group per subject 
acc_data_frame <- exp2.checking_task %>% 
  group_by(subj_id) %>% select(subj_id, mean_acc, OCI_quantile) %>% slice(1)

#Create variables of accuracy in standard deviation units to exclude participants 
acc_data_frame$Zscore <-scale(acc_data_frame$mean_acc)[,1]

#take a look on overall accuracy scores 
acc_data_frame %>% 
  group_by(OCI_quantile) %>% 
  summarise(mean_acc=mean(mean_acc))

#Sanity check - standardized values should have: mean=0 and SD=1.  
round(mean(acc_data_frame$Zscore), 2)
round(sd(acc_data_frame$Zscore), 2)

#mark participant who had error greater than Z>-2.5
acc_data_frame$remove <-acc_data_frame$Zscore<(-2.5)

#merge acc df with the checking df 
exp2.checking_task <- left_join(exp2.checking_task, acc_data_frame)

#remove participants who had more than Z>-2.5 errors. Three participants are removed. 
exp2.checking_task <-exp2.checking_task %>%
  filter(remove=='FALSE')

 checking_by_sub <- exp2.checking_task %>% 
  filter(OCI_quantile!='else') %>% 
  group_by(subj_id, condition, OCI_quantile,
           oci_overall) %>%
  summarise(N = n(),
            mean_RT = mean(rt, na.rm = T),
            median_RT = median(rt, na.rm = T),
            sd_RT = sd(rt, na.rm = T)) %>% ungroup() %>%
  mutate(log_mRT = log(mean_RT)) %>% 
  mutate(oci_type = ifelse(.$OCI_quantile == 'high', "High OC (OC+)", "Low OC (OC-)")) %>% 
  mutate(target_present = ifelse(.$condition=='ABS', "Absent", "Present"))


```


# Methods
We report how we determined our sample size, all data exclusions (if any), all manipulations, and all measures in the study. <!-- 21-word solution (Simmons, Nelson & Simonsohn, 2012; retrieved from http://ssrn.com/abstract=2160588) -->

## Participants
The research complied with all relevant ethical regulations and was approved by the Research Ethics Committee of Tel-Aviv University (study ID number 0004169-1). Two hundred twenty-six participants were recruited via Prolific. We invited former participants whose OCI scores were in the top or bottom OCI quantile in Exp. 1. In line with our preregistered stopping rule, we kept data collection until we had invited all participants in the first and fourth quartiles from our previous experiment (n=250; n=239, respectively). Participants completed the OCI questionnaire in this second session to.  We then split the sample into OC+/OC- groups based on cut-off scores from @toffolo2013mild (OCI-R total score ≥ 17 for the OC+ group; OCI-R total score ≤ 5 for the OC- group). Our final sample consisted of 110 OC+ participants and 68 OC- participants. The entire experiment took 12 minutes to complete, and participants were paid £1.8 for their participation, equivalent to an hourly wage of £9.

## Material
We used the original stimuli used in @toffolo2013mild, as provided by the authors. The visual search task consisted of one block of 50 individual search displays, each containing 25 elements. Half of the search displays were target-absent trials, in which 25 squares with a gap in one of the four edges were presented, and the other half were target-present trials, in which 24 open squares were presented and one closed square, the target. To make sure participants understood the task, a practice phase was given first. The practice phase consisted of 4 search displays, (2 target-absent and 2 target-present). In the practice phase, participants got feedback on their response accuracy. Participants were able to move to the next part of the experiment only after getting all questions right (4/4). The practice phase repeated until the performance was perfect, or until it has repeated more than three times, at which point the experiment terminated. Each trial lasted for a maximum of 10 seconds or until a response was received. If no response was given within 10 seconds, the next trial immediately appeared. Feedback about the response was given only in the practice phase, to help participants learn the task efficiently. In the main part of the experiment, no feedback was given.

## Procedure
A static version of experiment 2 can be accessed here: jatos.mindprobe.eu/publix/Qkm6hi2c3vS.  Experiment 2 was similar to experiment 1 with the following exceptions. First, the search task was more challenging due to an enlarged search grid, which led to larger gaps between stimuli, as well as reduced stimulus size and narrower sides of the squares. Second, experiment 2 did not had a perceived difficulty estimation part and was comprised of two parts: a visual search part and study questionnaires. Third, to make it identical to @toffolo2013mild, the practice trials in experiment 2 involved the same stimuli as the main blocks. Forth, participants were instructed to press the spacebar key to move to the search display screen. Once they pressed the space bar, the search display appeared immediately . Finally, the main part of the experiment included only the hard search type: looking for a closed square among open squares. 

The preregistered analysis plan can be accessed at the following link: https://osf.io/8a5mr. As in Experiment 1, we employed the Mersenne Twister pseudorandom number generator to ensure that our preregistration preceded data collection @mazor2019novel. Since Experiment 2 served as a direct replication, we adopted the same rejection criteria as @toffolo2013mild, in which participants were excluded if their error count exceeded 2.5 standard deviations from the mean error rate of the entire sample. In line with Experiment 1, participants were also excluded from the analysis if they incorrectly answered one or more attention-check questions. 


###Randomization
The order and timing of experimental events will be determined pseudo-randomly by the Mersenne Twister pseudorandom number generator, initialized to ensure registration time-locking [@mazor2019novel].


## Data analysis
We used `r cite_r("r-references.bib")` for all our analyses.


# Results
```{r Exp2_analyze_data, echo=FALSE, cache=TRUE}

#plot figure of mean RT for each group  

checking_by_sub %>% 
select(subj_id, target_present, oci_type, mean_RT)  %>%
  ggplot(aes(x = target_present, y = mean_RT,  group = oci_type, shape = oci_type)) +
  stat_summary(fun = mean,
               geom = "point",
               position = position_dodge(0.9),
               size = 5) +
  stat_summary(fun.data = mean_se,
               geom = "errorbar",
               width = 0.4,
               position = position_dodge(0.9)) +
  # stat_summary(fun = mean,
  #              geom = "line",
  #              position = position_dodge(0.9)) +
  scale_shape_manual(values = c("High OC (OC+)" = 1, "Low OC (OC-)" = 2)) +
  scale_x_discrete(labels = c("FALSE" = "Absent", "TRUE" = "Present")) +
  theme_bw() +
  theme(axis.title.x = element_blank(),
        text = element_text(size = 12)) +
  ylab('Mean RT (ms)')+
  labs(shape = "OC group")+ 
  coord_cartesian(ylim = c(2500,7500))

#ggsave(filename = "exp_2_results.png",width = 4, height = 3, dpi = 1500)  


# make a planned contrast df in which every participant has one raw with a difference score of the mean 
#target absent search time minus the mean target present search time. 

planned_df <- exp2.checking_task %>% 
  filter(rt!='null') %>%   filter(OCI_quantile!='else') %>% 
  group_by(subj_id, condition, OCI_quantile, oci_overall) %>% 
  summarise(mean_RT =mean(rt))%>% ungroup

#long to wide format 
planned_wide <- spread(planned_df, key = condition, value = mean_RT)

#adding difference score 
planned_wide <- planned_wide %>% mutate(RT_diff = ABS- PRE) 
#mean for target present trials - 
round(mean(unlist(planned_df[planned_df$condition=='PRE', 'mean_RT'])), 2)

#mean for target absent trials -
round(mean(unlist(planned_df[planned_df$condition=='ABS', 'mean_RT'])), 2)


Exp2_H1_desc <-planned_df %>% group_by(condition) %>% summarise(mean_rt=mean(mean_RT))

```

*Hypothesis 1 - Task validation*  
To validate our paradigm and demonstrate that target-absent searches are more difficult, we tested for an effect of condition (target-absent vs. target-present) on mean search times, collapsed across both groups. Our results revealed the expected difference `r apa_print(t.test(mean_RT~condition, data=planned_df, alternative='greater', paired=T))$statistic` with `r printnum(Exp2_H1_desc[2 ,2])` ms for target-present responses and `r printnum(Exp2_H1_desc[1 ,2])` ms for target-absent responses. 


*Hypothesis 2 - Direct replication* 
The primary aim of experiment 2 was to examine the interaction between group (OC+ vs. OC-) and condition (target-absent vs. target-present). We conducted a one-tailed t-test using the difference in search times (mean RT absent - mean RT present) as the dependent variable and group (OC+ vs. OC-) as the independent variable, expecting a greater difference score for the OC+ group. The one-tailed t-test revealed no significant differences between the groups,`r apa_print(t.test(RT_diff~OCI_quantile, data=planned_wide, alternative="greater"))$statistic`, providing no evidence for the expected interaction.

# Discussion


\newpage

# References

::: {#refs custom-style="Bibliography"}
:::

---
appendix: "appendix.Rmd"
---
